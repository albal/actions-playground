name: Test Phase - Reusable Workflow

on:
  workflow_call:
    inputs:
      skip-tests:
        description: "Skip test execution"
        required: false
        type: boolean
        default: false

jobs:
  unit-tests:
    name: Unit Tests
    runs-on: ubuntu-latest
    if: ${{ !inputs.skip-tests }}
    steps:
      - name: Run unit tests
        run: |
          echo "ğŸ§ª Running unit tests"
          echo "ğŸ”¬ Testing frontend components"
          sleep 2
          echo "ğŸ”¬ Testing backend services"
          sleep 3
          echo "ğŸ”¬ Testing database operations"
          sleep 2
          echo "ğŸ“Š Test Results:"
          echo "   Frontend: 127 tests passed"
          echo "   Backend: 89 tests passed"
          echo "   Database: 45 tests passed"
          echo "âœ… All unit tests passed"

  integration-tests:
    name: Integration Tests
    runs-on: ubuntu-latest
    if: ${{ !inputs.skip-tests }}
    steps:
      - name: Run integration tests
        run: |
          echo "ğŸ”— Running integration tests"
          echo "ğŸ”§ Setting up test environment"
          sleep 2
          echo "ğŸ”Œ Testing API endpoints"
          sleep 4
          echo "ğŸ”Œ Testing service communication"
          sleep 3
          echo "ğŸ”Œ Testing database connectivity"
          sleep 2
          echo "ğŸ“Š Integration test results: 34 tests passed"
          echo "âœ… All integration tests passed"

  e2e-tests:
    name: End-to-End Tests
    runs-on: ubuntu-latest
    if: ${{ !inputs.skip-tests }}
    steps:
      - name: Run E2E tests
        run: |
          echo "ğŸ­ Running end-to-end tests"
          echo "ğŸŒ Starting test browser"
          sleep 2
          echo "ğŸ–±ï¸  Testing user workflows"
          sleep 5
          echo "ğŸ“± Testing mobile responsiveness"
          sleep 3
          echo "ğŸ” Testing accessibility"
          sleep 2
          echo "ğŸ“Š E2E test results: 18 scenarios passed"
          echo "âœ… All E2E tests passed"
